<!DOCTYPE HTML>
<html lang="en">
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title> P0: Climate At a Glance </title>

    <!-- JS & CSS & Font Files/Links -->
    <link rel="stylesheet" type="text/css" href="webpage.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">

    <!-- Scripts -->
    <script type="text/javascript" src="scripts/d3.min.js"></script>
    <script src="scripts/graph.js" type='text/javascript'></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <style>
        body {
            background-color: #a6ddf1;
            color: white;
        }

        #title {
            font-family: 'Nunito', sans-serif;
            font-size: 50px;
            letter-spacing: 2.5px;
            text-align: center;

        }

        .label {
            font-family: Arial, sans-serif;
            font-size: 12px;
            letter-spacing: 2.5px;
        }

        .axis {
            font-size: 11px;
            color: white;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: #fff;
            shape-rendering: auto;
            font-size: 12px;
        }

    </style>

</head>

<body>

    <div class="container-fluid">
        <h1 id="title"> Temperature Anomalies </h1>

        <div id="scatterPlot" align="center" style="padding-top: 100px"></div>

        <script>

            /*
            var width = 400, height = 1200;

            var data = [0, 10, 15, 20, 25, 30];
            var svg = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            var scale = d3.scaleLinear()
                .domain([d3.min(data), d3.max(data)])
                .range([height/2, 0]);

            var y_axis = d3.axisLeft()
                .scale(scale);

            svg.append("g")
                .attr("transform", "translate(50, 10)")
                .call(y_axis);
            */

            var margin = {top: 20, right: 20, bottom: 30, left: 70},
                width = 960 - margin.left - margin.right,
                height = 800 - margin.top - margin.bottom;

            var x = d3.scaleLinear().range([0, width - 100]);

            var y = d3.scaleLinear().range([height, 0]);

            var x_axis = d3.axisBottom()
                .scale(x)
                .tickFormat(d3.format("d")); // remove commas from numbers in the thousands (years)

            var y_axis = d3.axisLeft()
                .scale(y)
                .ticks(13);

            d3.csv("data/northAmerica-1987-2017.csv", function(error, data) {
                data.forEach(function(d) {
                    d.year = +d.year;
                    d.value = +d.value;

                    console.log(d.year);
                    console.log(d.value);
                });
                x.domain([d3.min(data, function(d) { return d.year; }), d3.max(data, function (d) { return d.year; })]);

                y.domain([d3.min(data, function (d) { return d.value*-1; }), d3.max(data, function (d) {return d.value; })]);

                var vis = d3.select("#scatterPlot")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                        "translate(" + margin.left + "," + margin.top + ")");

                vis.append("g")
                    .attr("class", "axis")
                    .attr("transform", "translate(0," + height/2 + ")")
                    .call(x_axis)
                    .selectAll("text") // years text settings
                    .style("text-anchor", "end") //  text alignment
                    .attr("dx", "-0.7em") // x position
                    .attr("dy", "+0.10em") // y position
                    .attr("transform", "rotate(-45)" ); // transform by rotating

                vis.append("g")
                    .attr("class", "axis")
                    .call(y_axis);

                vis.append("text")
                    .attr("class", "label") // x label
                    .attr("transform",
                        "translate(" + (width-60) + " ," + (height/2) + ")") // fullwidth-70  & height/2
                    .style("text-anchor", "end") //  text alignment
                    .text("Year");

                vis.append("text")
                    .attr("class", "label") // y label
                    .attr("transform", "rotate(-90)") // rotate 90 degrees
                    .attr("y", 0 - margin.left + 10) // y position
                    .attr("x", 0 - (height/2)) // x position
                    .attr("dy", "1em") // relative to x coord
                    .attr("text-anchor", "middle") // text alignment
                    /*
                    .attr("transform",
                        "translate(" + (width=30) + " ," + (height=0) + ")") // width is 30, height is 0
                    .style("text-anchor", "end") //  text alignment*/
                    .text("Value");

            });


            //var ydata = [-2.0, -1.5, -1.0, -0.5, 0.0, 0.5, 1.0, 1.5, 2.0];
            //var xdata = [1985, 1987, 1988, 1989, 1990]
            /*
            vis.append("g")
                .attr("transform", "translate(50, 10)")
                .call(y_axis);

            var xAxisTranslate = height/2 + 10;

            vis.append("g")
                .attr("transform", "translate(50, " + xAxisTranslate +")")
                .call(x_axis);*/

            d3.select("#scatterPlot")
                .attr("align","center"); // Center this svg!

        </script>
    </div>
</body>
</html>